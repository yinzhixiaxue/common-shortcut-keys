---
theme: github
---

## ä¸€ã€js åŸºç¡€å…«è‚¡

### 1.è§£é‡Šä¸€ä¸‹åŸå‹é“¾

#### è®²æ¦‚å¿µ

åŸå‹é“¾æ˜¯ JavaScript ä¸­å®ç°ç»§æ‰¿çš„ä¸€ç§æœºåˆ¶ã€‚æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆobjectï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º **proto** ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡ï¼ˆ**proto**ï¼‰ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ° Object.prototype çš„**proto**ä¸º null ã€‚è¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªåŸå‹é“¾ã€‚

#### å¯ä»¥ç›´æ¥æ‹“å±•

å¦‚æœåœ¨å½“å‰å¯¹è±¡ä¸­æŸ¥æ‰¾æŸä¸ªå±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå½“å‰å¯¹è±¡ä¸å­˜åœ¨è¯¥å±æ€§æˆ–æ–¹æ³•ï¼ŒJavaScript å¼•æ“ä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–æ–¹æ³•ä¸ºæ­¢ï¼Œæˆ–è€…æŸ¥æ‰¾åˆ°åŸå‹é“¾çš„é¡¶ç«¯ã€‚

#### æ¡ˆä¾‹ç†è§£

ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå¯¹è±¡ objï¼Œå®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸º prototype1ï¼Œè€Œ prototype1 çš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸º prototype2ï¼Œé‚£ä¹ˆåœ¨æŸ¥æ‰¾ obj çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ŒJavaScript å¼•æ“ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿›è¡ŒæŸ¥æ‰¾ï¼š

åœ¨ obj æœ¬èº«ä¸­æŸ¥æ‰¾è¯¥å±æ€§æˆ–æ–¹æ³•ã€‚

å¦‚æœ obj ä¸­ä¸å­˜åœ¨è¯¥å±æ€§æˆ–æ–¹æ³•ï¼Œåˆ™åœ¨ prototype1 ä¸­æŸ¥æ‰¾ã€‚

å¦‚æœ prototype1 ä¸­ä¹Ÿä¸å­˜åœ¨è¯¥å±æ€§æˆ–æ–¹æ³•ï¼Œåˆ™ç»§ç»­åœ¨ prototype2 ä¸­æŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æŸ¥æ‰¾åˆ° Object.prototypeã€‚

å¦‚æœåœ¨ Object.prototype ä¸­ä»ç„¶æ²¡æœ‰æ‰¾åˆ°è¯¥å±æ€§æˆ–æ–¹æ³•ï¼Œåˆ™è¿”å› undefinedã€‚

è¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹å°±æ„æˆäº†åŸå‹é“¾ã€‚åœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡çš„åŸå‹å¯¹è±¡å¯ä»¥é€šè¿‡ **proto** å±æ€§æˆ– Object.getPrototypeOf() æ–¹æ³•è·å–ã€‚

åŸå‹é“¾çš„ä½œç”¨åœ¨äºå®ç°äº† JavaScript ä¸­çš„ç»§æ‰¿ã€‚å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦ç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†çˆ¶å¯¹è±¡è®¾ç½®ä¸ºå­å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œä»è€Œä½¿å­å¯¹è±¡èƒ½å¤Ÿæ²¿ç€åŸå‹é“¾è®¿é—®çˆ¶å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚

#### ç¼ºç‚¹

åœ¨åŸå‹é“¾ä¸ŠæŸ¥æ‰¾å±æ€§æ¯”è¾ƒè€—æ—¶ï¼Œå¯¹æ€§èƒ½æœ‰å‰¯ä½œç”¨ï¼Œè¿™åœ¨æ€§èƒ½è¦æ±‚è‹›åˆ»ï¼ˆä¸€èˆ¬æƒ…å†µåŸºæœ¬æ— å½±å“ï¼‰çš„æƒ…å†µä¸‹å¾ˆé‡è¦ã€‚å¦å¤–ï¼Œè¯•å›¾è®¿é—®ä¸å­˜åœ¨çš„å±æ€§æ—¶ä¼šéå†æ•´ä¸ªåŸå‹é“¾ï¼ˆè¿™ç‚¹ä¹Ÿå¾ˆé‡è¦ï¼Œéœ€è¦è®°ä½ï¼‰ã€‚

### 2.å…·ä½“åŸå‹é“¾åˆ¤æ–­

Object.**proto** === Function.prototype; (å¯¹è±¡çš„éšå¼åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„æ˜¾å¼åŸå‹)

Function.prototype.**proto** === Object.prototype;

Object.prototype.**proto** === null;

Person.prototype.constructor === Person

p1.**proto** === Person.prototype

#### åˆ¤æ–­å‡†åˆ™ï¼š

prototype æ˜¯æ„é€ å‡½æ•°æ‰æœ‰çš„å±æ€§

**proto**ï¼šæ˜¯éšå¼åŸå‹ï¼Œæ˜¯å¯¹è±¡æ‰æœ‰çš„å±æ€§ï¼Œç”±äºå‡½æ•°ä¹Ÿå±äºå¯¹è±¡çš„ä¸€ç§ï¼Œæ‰€ä»¥å‡½æ•°ä¹Ÿæœ‰è¿™ä¸ªå±æ€§

constructor æ˜¯åŸå‹å¯¹è±¡æ‰æœ‰çš„å±æ€§

å¯¹è±¡.**proto** === æ„é€ å‡½æ•°.prototype

æ„é€ å‡½æ•°.prototype.constructor = æ„é€ å‡½æ•°

æ‰€æœ‰æ„é€ å‡½æ•°çš„ **proto** å±æ€§éƒ½æŒ‡å‘ Function.prototype

æ‰€æœ‰æ™®é€šå¯¹è±¡çš„ **proto** å±æ€§éƒ½æŒ‡å‘ Object.prototype

Object.prototype.**proto** === null

å®ä¾‹æœ¬èº«æ²¡æœ‰ constructor å±æ€§ï¼Œconstructor æ˜¯åŸå‹å¯¹è±¡æ‰æœ‰çš„å±æ€§ï¼Œæ‰€ä»¥å®ƒä¼šæ²¿ç€åŸå‹é“¾åœ¨å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Šæ‰¾åˆ° constuctor è¿™ä¸ªå±æ€§ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„æ„é€ å‡½æ•°

ï¿¼

ï¿¼ï¿¼

### 3.Object.prototype.**proto** åŸå‹é“¾çš„å°½å¤´æ˜¯ä»€ä¹ˆ

ç­”æ¡ˆä¸º nullï¼Œä¸ºä»€ä¹ˆï¼Ÿ

å› ä¸º Object çš„åŸå‹å¯¹è±¡çš„**proto**å±æ€§æŒ‡å‘çš„æ˜¯ Object çš„åŸå‹å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œä½†æ˜¯å› ä¸º Object çš„æ„é€ å‡½æ•°æ˜¯ Objectï¼Œé‚£ Object.prototype çš„**proto**æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ˜¯å®ƒè‡ªå·±ï¼Œä¸ºé˜²æ­¢æ­»å¾ªç¯ï¼Œæ‰€ä»¥åŸå‹é“¾çš„å°½å¤´çš„ null

### 4.Function.prototype.**__proto__** ç­”æ¡ˆæ˜¯ä»€ä¹ˆ

ç­”æ¡ˆæ˜¯ Object.prototypeï¼Œä¸ºä»€ä¹ˆï¼Ÿ
å¯¹è±¡çš„éšå¼åŸå‹**proto**æŒ‡å‘å®ƒæ„é€ å‡½æ•°çš„æ˜¾å¼åŸå‹ prototypeï¼ŒFunction.prototype æ˜¯åŸå‹å¯¹è±¡ï¼Œå®ƒçš„**proto**æŒ‡å‘å®ƒæ„é€ å‡½æ•° Object çš„ prototypeï¼Œæ‰€ä»¥ Function.prototype.**proto**=Object.prototype

### 5.æ„é€ å‡½æ•°è‡ªèº«çš„**proto**æ˜¯ä»€ä¹ˆ

Function.prototype

ç”±äºå¯¹è±¡çš„ï¼ˆéšå¼åŸå‹**proto**ï¼‰æŒ‡å‘å®ƒæ„é€ å‡½æ•°çš„ï¼ˆæ˜¾å¼åŸå‹ prototypeï¼‰ï¼ŒFunction ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå®ƒçš„æ„é€ å‡½æ•°æ˜¯å®ƒæœ¬èº«ï¼Œä¹Ÿå°±æ˜¯ Function.**proto**===Function.prototype

### 6.Object.**proto** ç­”æ¡ˆæ˜¯ä»€ä¹ˆ

Function.prototype

ç”±äºå¯¹è±¡çš„ï¼ˆéšå¼åŸå‹**proto**ï¼‰æŒ‡å‘å®ƒæ„é€ å‡½æ•°çš„ï¼ˆæ˜¾å¼åŸå‹ prototypeï¼‰ï¼ŒObject çš„æ„é€ å‡½æ•°æ˜¯ Functionï¼Œæ‰€ä»¥ Object.**proto**=Function.prototype

### 7.Function.prototype===Function.**proto**

true

ç”±äºå¯¹è±¡çš„ï¼ˆéšå¼åŸå‹**proto**ï¼‰æŒ‡å‘å®ƒæ„é€ å‡½æ•°çš„ï¼ˆæ˜¾å¼åŸå‹ prototypeï¼‰ï¼ŒFunction çš„æ„é€ å‡½æ•°æ˜¯ä»–è‡ªå·±ï¼Œæ‰€ä»¥ Function.**proto**===Function.prototype

### 8.Object instanceof Function

true

instanceof è¿ç®—ç¬¦ç”¨äºåˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚

Object.**proto**æŒ‡å‘å®ƒæ„é€ å‡½æ•° Function çš„ prototypeï¼Œæ‰€ä»¥ Object instanceof Function ä¸º true

### 9.Function instanceof Object

true

instanceof è¿ç®—ç¬¦ç”¨äºåˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚

Function çš„æ„é€ å‡½æ•°æ˜¯ Function æœ¬èº«ï¼ŒFunction.**proto**=Function.prototype,ç»§ç»­å‘ä¸Šæ‰¾ï¼ŒFunction.prototype æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒFunction.prototype.**proto**===Object.prototypeï¼Œå› ä¸º Function.prototype æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä»–çš„æ„é€ å‡½æ•°æ˜¯ Object. æ‰€ä»¥æ˜¯ true

### 10. Function instanceof Function

true

instanceof è¿ç®—ç¬¦ç”¨äºåˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚

Function çš„æ„é€ å‡½æ•°æ˜¯ Function æœ¬èº«ï¼ŒFunction.**proto**=Function.prototype,

### 11. instanceof çš„åŸç†åŠå®ç°ï¼Ÿtypeof å’Œ instanceof çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

åŸç†ï¼šåŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œåˆ¤æ–­æ„é€ å‡½æ•°(å³å€¼)çš„åŸå‹æ˜¯å¦åœ¨å¯¹è±¡(å·¦å€¼)çš„åŸå‹é“¾ä¸Š

```js
function myInstanceof(left, right) {
  if (typeof left !== 'object' || typeof left === null) return false
  let rprototype = right.prototype
  let lproto = left.__proto__
  while (true) {
    if (lproto === null) return false
    if (lproto === rprototype) return true lproto = lproto.__proto__
  }
}
```

#### typeof ä¸ instanceof éƒ½æ˜¯åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ³•ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š

â— è¿”å›ç±»å‹ä¸åŒï¼Œtypeof ä¼šè¿”å›ä¸€ä¸ªè¿ç®—æ•°çš„åŸºæœ¬ç±»å‹ï¼Œinstanceof è¿”å›çš„æ˜¯å¸ƒå°”å€¼

â— instanceof å¯ä»¥å‡†ç¡®åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½æ­£ç¡®åˆ¤æ–­åŸå§‹æ•°æ®ç±»å‹

â— typeof è™½ç„¶å¯ä»¥åˆ¤æ–­åŸå§‹æ•°æ®ç±»å‹ï¼ˆnull é™¤å¤–ï¼‰ï¼Œä½†æ˜¯æ— æ³•åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆfunction é™¤å¤–ï¼‰

```js
typeof 1; // 'number'
typeof '1' // 'string' 
typeof undefined // 'undefined'
typeof true // 'boolean'
typeof Symbol() // 'symbol' 
typeof null // 'object' 
typeof[] // 'object'
typeof {} // 'object' 
typeof(() = >{}) // 'function' 
typeof new Date() // 'object' 
typeof new RegExp() // 'object'
```

typeof æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯ nullï¼Œfunction

function ä¹Ÿæ˜¯ objectï¼Œä¸ºä»€ä¹ˆ typeof function æ˜¯ functionï¼Œè€Œä¸æ˜¯ objectï¼Ÿ

function å®é™…ä¸Šæ˜¯ object çš„ä¸€ä¸ªå­ç±»å‹ï¼Œæ›´æ·±ç‚¹è¯´ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥è¢«è°ƒç”¨çš„å¯¹è±¡ã€‚ï¼ˆå‚è€ƒï¼šä½ ä¸çŸ¥é“çš„ JS-ä¸­å·ï¼‰ã€‚

å‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯å¯¹è±¡ï¼Œåªä¸è¿‡ä¸æ™®é€šçš„å¯¹è±¡ç›¸æ¯”ï¼Œå®ƒåœ¨å†…éƒ¨å®ç°äº†ä¸€ä¸ª[[call]]æ–¹æ³•ï¼Œç”¨æ¥è¡¨ç¤ºè¯¥å¯¹è±¡å¯ä»¥è¢«è°ƒç”¨ã€‚

typeof æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å†…éƒ¨åŒ…å«äº†[[call]]æ–¹æ³•ï¼Œå°±ä¼šè¿”å› functionã€‚

é™„ä¸Š typeof æ“ä½œç¬¦è¿”å›åˆ¤æ–­å›¾ï¼š

ï¿¼

#### æ‰©å±•ï¼štypeof çš„åŸç†

å…¶å®ï¼Œjs åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ 1-3 ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ï¼Œå¯¹è±¡çš„æœºå™¨ç æ˜¯ 000ï¼Œä½†æ˜¯å¯¹äº undefined å’Œ null æ¥è¯´ï¼Œnull çš„æ‰€æœ‰æœºå™¨ç éƒ½æ˜¯ 000ï¼Œundefined åˆ™æ˜¯-2^30 æ•´æ•°,

typeof å¯ä»¥å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œä¾‹å¦‚ number, string, object, boolean, function, undefined, symbolï¼Œä½†æ˜¯åœ¨åˆ¤æ–­ object ç±»å‹çš„æ—¶å€™ï¼Œè€Œä¸èƒ½ç»†è‡´çš„å…·ä½“åˆ°å“ªä¸€ç§ objectï¼Œå¦‚æœè¦æƒ³å…·ä½“åˆ°å“ªä¸€ç§ objectï¼Œå¯

æ¨èä½¿ç”¨ï¼šObject.prototype.toString.call()

```js
Object.prototype.toString.call(1); // "[object Number]" 
Object.prototype.toString.call('1') // "[object String]" 
Object.prototype.toString.call(undefined) // "[object Undefined]" 
Object.prototype.toString.call(true) // "[object Boolean]" 
Object.prototype.toString.call(Symbol(1)) // "[object Symbol]" 
Object.prototype.toString.call(null) // "[object Null]" 
Object.prototype.toString.call([]) // "[object Array]" 
Object.prototype.toString.call({}) // "[object Object]"
Object.prototype.toString.call(true) // "[object Boolean]" 
Object.prototype.toString.call(() = >{}) // "[object Function]" 
Object.prototype.toString.call(new Date()) // "[object Date]" 
Object.prototype.toString.call(new RegExp()) // "[object RegExp]"

```

### 12.new æ“ä½œç¬¦å…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ

ï¼ˆ1ï¼‰é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡

ï¼ˆ2ï¼‰è®¾ç½®åŸå‹ï¼Œå°†å¯¹è±¡çš„éšå¼åŸå‹ï¼ˆ**proto**ï¼‰è®¾ç½®ä¸ºæ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹ï¼ˆ prototype å¯¹è±¡ï¼‰ã€‚

ï¼ˆ3ï¼‰è®©å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰

ï¼ˆ4ï¼‰åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯å€¼ç±»å‹ï¼Œè¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚

```js
function _new(fn, ...rest) {
  // åˆ¤æ–­å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•° 
  if (typeof fn !== 'function') {
    console.error('type error') return
  }
  // æ–°å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„éšå¼åŸå‹ä¸ºæ„é€ å‡½æ•°çš„ æ˜¾å¼åŸå‹ï¼ˆprototype å¯¹è±¡ï¼‰ 
  let obj = Object.create(fn.prototype) // å°† this æŒ‡å‘æ–°å»ºå¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå‡½æ•° 
  let result = fn.apply(obj, rest)
  // åˆ¤æ–­è¿”å›å¯¹è±¡ 
  let flag = result && (typeof result === 'object' || typeof result === 'function')
  // åˆ¤æ–­è¿”å›ç»“æœ 
  return flag ? result: obj
}
```

### 13.es6 let var const çš„åŒºåˆ«


#### 1ã€å—çº§ä½œç”¨åŸŸ

å—çº§ä½œç”¨åŸŸæ˜¯æŒ‡{}åŒ…æ‹¬çš„åŒºåŸŸå­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œlet å’Œ const å­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œvar ä¸å­˜åœ¨

#### 2ã€å˜é‡æå‡

var å£°æ˜çš„å˜é‡å­˜åœ¨å˜é‡æå‡ï¼Œè€Œ const å’Œ let ä¸å­˜åœ¨

#### 3ã€æš‚æ—¶æ€§æ­»åŒº

var å®šä¹‰çš„å˜é‡ä¸å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œè€Œ const å’Œ let å­˜åœ¨

#### 4ã€é‡å¤å£°æ˜

var å®šä¹‰çš„å˜é‡å¯ä»¥é‡å¤å£°æ˜ï¼Œè€Œ let å’Œ const ä¸å¯ä»¥

#### 5ã€å…¨å±€å˜é‡

var å®šä¹‰çš„å˜é‡ä¼šè¢«å­˜åœ¨ window å¯¹è±¡ä¸Šï¼Œnode åˆ™æ˜¯ global å¯¹è±¡ä¸Šï¼Œè€Œ let å’Œ const ä¸ä¼š

#### 6ã€åˆå§‹å€¼è®¾ç½®

let å’Œ var å¯ä»¥ä¸ç”¨è®¾ç½®åˆå§‹å€¼ï¼Œä½†æ˜¯ const è¦è®¾ç½®åˆå§‹å€¼

#### 7ã€æŒ‡é’ˆæŒ‡å‘

let å’Œ const æ˜¯ es6 çš„æ–°å¢å˜é‡çš„è¯­æ³•ï¼Œlet å¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼Œå³æ”¹å˜æŒ‡é’ˆæŒ‡å‘ï¼Œè€Œ const ä¸å¯ä»¥æ”¹å˜æŒ‡é’ˆæŒ‡å‘

### 15.this æŒ‡å‘é—®é¢˜

å…³é”®è¯ï¼šå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€ç®­å¤´å‡½æ•°ã€new

è§„åˆ™ï¼šç®­å¤´å‡½æ•°>new>æ˜¾å¼è°ƒç”¨>éšå¼è°ƒç”¨>é»˜è®¤ç»‘å®š

è§£é‡Šï¼šthis æ˜¯ javascript ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œå¤šæ•°æƒ…å†µä¸‹æŒ‡å‘çš„æ˜¯è°ƒç”¨å®ƒçš„å¯¹è±¡

é¦–å…ˆï¼Œthis åº”è¯¥æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰ï¼Œå…¶æ¬¡è¿™ä¸ªå¯¹è±¡æŒ‡å‘çš„æ˜¯è°ƒç”¨å®ƒå®ƒçš„å¯¹è±¡ï¼Œå¦‚æœè°ƒç”¨å®ƒçš„ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å¯¹è±¡ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå®ƒæŒ‡å‘çš„å°±æ˜¯å…¨å±€å¯¹è±¡ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º undefinedï¼‰

å…¶å®ï¼Œthis åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶å°±ç¡®å®šäº†ï¼Œå®ƒçš„æŒ‡å‘å°±æ˜¯å‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯å®ƒå£°æ˜çš„åœ°æ–¹ï¼ˆé™¤ç®­å¤´å‡½æ•°å¤–ï¼‰ã€‚å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒåŒ…å«äº†å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼ˆè°ƒç”¨æ ˆï¼‰ã€å‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€ä»¥åŠå‡½æ•°çš„å‚æ•°ç­‰ä¿¡æ¯ï¼Œthis å°±æ˜¯ä¸€ä¸ªè®°å½•å®ƒçš„ä¸€ä¸ªå±æ€§ï¼Œåœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šè¢«ç”¨åˆ°

#### 1ã€é»˜è®¤ç»‘å®š

å‡½æ•°çš„æµè§ˆå™¨åœ¨å…¨å±€ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ä»£è¡¨çš„æ˜¯å…¨å±€å¯¹è±¡ Windowï¼Œåœ¨ node ç¯å¢ƒä¸‹åˆ™æ˜¯ Globalï¼Œå¦‚æœæ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™æ˜¯ undefined

#### 2ã€éšå¼ç»‘å®š

ç†è§£ï¼šè°è°ƒç”¨å°±æŒ‡å‘è°

#### 3ã€æ˜¾å¼ç»‘å®š

applyã€callã€bind éƒ½æ˜¯å¯ä»¥æ”¹å˜å‡½æ•°æŒ‡å‘ï¼Œä½†æ˜¯ call å’Œ apply æ˜¯ç›´æ¥è¿›è¡Œå‡½æ•°è°ƒç”¨ ï¼Œä¸ä¼šæ‰§è¡Œå‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°çš„å‡½æ•°å·²ç»è‡ªåŠ¨ç»‘å®šäº†æ–°çš„ this æŒ‡å‘ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ã€‚ call æ–¹æ³•æ¥å—çš„æ˜¯å‚æ•°åˆ—è¡¨ï¼Œè€Œ apply æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„

```js
const target = {} 
fn.call(target, 'arg1', 'arg2') 
fn.apply(target, ['arg1', 'arg2']) 
fn.bind(target, 'arg1', 'arg2')()
```

å¦‚æœä¼ å…¥äº† null æˆ–è€… undefined ä½œä¸º this æŒ‡å‘ï¼Œåˆ™ this ä¼šä½¿ç”¨é»˜è®¤ç»‘å®šè§„åˆ™

å¹¶ä¸”ä½¿ç”¨å¤šæ¬¡ bind ç»‘å®šï¼Œæ°¸è¿œå–ç¬¬ä¸€æ¬¡ this çš„æŒ‡å‘

#### 4ã€new ç»‘å®š

å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ new è°ƒç”¨æ—¶ï¼Œ this ç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„æ„é€ å‡½æ•°çš„å®ä¾‹

#### 5ã€ç‰¹æ®Š this æŒ‡å‘

1.ç®­å¤´å‡½æ•°ä¸­çš„ this åªå–å†³åŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°çš„ this

2.æ•°ç»„æ–¹æ³•ï¼šä¾‹å¦‚ forEachã€findã€findIndexã€mapã€someã€every éƒ½å¯ä»¥æ”¹å˜ this æŒ‡å‘(ç¬¬äºŒä¸ªå‚æ•°)

3.ç«‹å³æ‰§è¡Œå‡½æ•°ï¼šå°±æ˜¯é»˜è®¤çš„å…¨å±€å¯¹è±¡ window

4.setTimeout å’Œ setInterval:å…¶å®ï¼Œå»¶æ—¶æ•ˆæœï¼ˆsetTimeoutï¼‰å’Œå®šæ—¶æ•ˆæœï¼ˆsetIntervalï¼‰éƒ½æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å®ç°çš„ã€‚æ— è®ºæ˜¯ setTimeout è¿˜æ˜¯ setInterval é‡Œä¼ å…¥çš„å‡½æ•°ï¼Œéƒ½ä¼šé¦–å…ˆè¢«äº¤åˆ°å…¨å±€å¯¹è±¡æ‰‹ä¸Šã€‚å› æ­¤ï¼Œå‡½æ•°ä¸­ this çš„å€¼ï¼Œä¼šè¢«è‡ªåŠ¨æŒ‡å‘ window

6ã€ä¸åœ¨å‡½æ•°ä¸­çš„åœºæ™¯ï¼Œå¯åˆ†ä¸ºæµè§ˆå™¨çš„ script æ ‡ç­¾é‡Œï¼Œæˆ– Node.js çš„æ¨¡å—æ–‡ä»¶é‡Œã€‚
 1) åœ¨ script æ ‡ç­¾é‡Œï¼Œthis æŒ‡å‘ Windowã€‚
 2) åœ¨ Node.js çš„æ¨¡å—æ–‡ä»¶é‡Œï¼Œthis æŒ‡å‘ Module çš„é»˜è®¤å¯¼å‡ºå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ module.exportsã€‚

### 16.applyã€callã€bind çš„åŒºåˆ«

å…³é”®è¯ï¼šå‚æ•°æ ¼å¼ã€this æŒ‡å‘ï¼Œè¿”å›å€¼ã€å¿…é¡»æ˜¯ Function è°ƒç”¨

1ã€applyã€callã€bind çš„ç›¸åŒç‚¹ï¼šéƒ½æ˜¯ç”¨æ¥æ”¹å˜ this æŒ‡å‘ï¼Œä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç»‘å®šçš„ this æŒ‡å‘ã€åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœä¼ å…¥ null æˆ–è€… undefined çš„è¯ï¼Œä¼šæŠŠå…¨å±€å¯¹è±¡ window å½“åš this æŒ‡å‘ï¼›è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼ å…¥ null å°±æ˜¯ nullï¼Œundefined å°±æ˜¯ undefined

2ã€call å’Œ apply çš„åŒºåˆ«æ˜¯ï¼šcallã€bind ä¼ å…¥çš„éƒ½æ˜¯å‚æ•°åˆ—è¡¨ï¼Œapply ä¼ å…¥çš„æ˜¯å‚æ•°æ•°ç»„ï¼›call ä¼ å…¥çš„å‚æ•°å¦‚æœæ˜¯æ•°ç»„å°†ä¼šæ˜ å°„åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šï¼Œå…¶ä»–çš„æ˜¯ undefinedï¼›apply çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„ï¼Œ

ï¿¼

3ã€bindã€call å’Œ appy çš„åŒºåˆ«æ˜¯ï¼šbind çš„è¿”å›çš„æ˜¯ä¸€ä¸ªæ”¹å˜ this æŒ‡å‘çš„å‡½æ•°ï¼Œä¾¿äºç¨åè°ƒç”¨ï¼Œä¸åƒ call å’Œ apply ä¼šç«‹å³è°ƒç”¨ï¼›bind å’Œ call å¾ˆåƒï¼Œä¼ å…¥çš„ä¹Ÿæ˜¯å‚æ•°åˆ—è¡¨ï¼Œä½†æ˜¯å¯ä»¥å¤šæ¬¡ä¼ å…¥ï¼Œä¸éœ€è¦åƒ callï¼Œä¸€æ¬¡ä¼ å…¥

æ€»ç»“ï¼š

1ã€call å’Œ apply çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯æ”¹å˜å¯¹è±¡çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚å®ƒä»¬åœ¨å‚æ•°ä¸Šçš„å†™æ³•ç•¥æœ‰åŒºåˆ«ã€‚

2ã€bind ä¹Ÿèƒ½æ”¹å˜å¯¹è±¡çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒä¸ call å’Œ apply ä¸åŒçš„æ˜¯ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”éœ€è¦ç¨åå†è°ƒç”¨ä¸€ä¸‹ï¼Œæ‰ä¼šæ‰§è¡Œã€‚

### 17.applyã€callã€bind çš„å®ç°

ï¼ˆ1ï¼‰call å‡½æ•°çš„å®ç°

åˆ¤æ–­è°ƒç”¨çš„å¯¹è±¡æ˜¯ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå³ä½¿æ˜¯å®šä¹‰åœ¨å‡½æ•°åŸå‹ä¸Šçš„ï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µ

æˆªå–é™¤ç¬¬ä¸€ä¸ªå¤–çš„å‰©ä½™å‚æ•°ï¼Œå¹¶åˆ¤æ–­ context ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™è®¾ç½®ä¸º window

å°†å‡½æ•°ä½œä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ·»åŠ åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸Š

è°ƒç”¨è¯¥ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ–¹æ³•å¹¶æŠŠå‚æ•°ä¼ è¿›å»

åˆ é™¤è¯¥ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ–¹æ³•å±æ€§

è¿”å›è°ƒç”¨åçš„ç»“æœ

```js
Function.prototype.myCall = function(context) {
  if (typeof this !== 'function') {
    console.error("type error")
  }
  let args = [...arguments].slice(1) let result = null context = context || window context.fn = this result = context.fn(...args) delete context.fn
  return result
}
```

ï¼ˆ2ï¼‰apply å‡½æ•°çš„å®ç°

åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå³ä½¿å®šä¹‰åœ¨åŸå‹ï¼Œä¹Ÿä¼šå‡ºç° apply æ–¹å¼è°ƒç”¨çš„åœºæ™¯

åˆ¤æ–­ä¼ å…¥çš„ context å³ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œé‚£å°±é»˜è®¤æ˜¯ window

ç»™ä¸Šä¸‹æ–‡å¯¹è±¡æ·»åŠ å±æ€§æ–¹æ³• fn

åˆ¤æ–­ apply çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ç›´æ¥è°ƒç”¨ï¼Œå¦‚æœå­˜åœ¨æŠŠå‚æ•°æ”¾è¿›å»è°ƒç”¨

åˆ é™¤æ–°æ·»åŠ çš„å±æ€§æ–¹æ³•

è¿”å›è°ƒç”¨åçš„ç»“æœ

```js
Function.prototype.myApply = function(context) {
  if (typeof this !== "function") {
    console.error("type error")
  }
  let result = null context = context || window context.fn = this
  if (arguments[1]) {
    result = context.fn(...arguments[1])
  } else {
    result = context.fn()
  }
  delete context.fn
  return result
}
```

ï¼ˆ3ï¼‰bind å‡½æ•°çš„å®ç°

åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå³ä½¿å®šä¹‰åœ¨åŸå‹ä¸Šï¼Œä¹Ÿä¼šå‡ºç° bind æ–¹å¼è°ƒç”¨çš„åœºæ™¯

è·å–é™¤ç¬¬ä¸€ä¸ªå‚æ•°å¤–çš„å‰©ä½™å‚æ•°

åˆ¤æ–­ context ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦å­˜åœ¨

è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦ä¸º new æ„é€ å‡½æ•°ï¼Œå³ä½¿ç”¨ instanceof åˆ¤æ–­æ˜¯å¦å‡½æ•°å†…éƒ¨ this æŒ‡å‘æ„é€ å‡½æ•°

å¦‚æœä¸æ˜¯åˆ™ä½¿ç”¨ apply è°ƒç”¨ï¼ŒæŠŠå‰©ä½™å‚æ•°æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªä½ç½®

å¦‚æœæ˜¯åˆ™ä½¿ç”¨ new æ„é€ å‡½æ•°ï¼ŒæŠŠå‡½æ•°å†…éƒ¨ this æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡
ä¸º
```js
Function.prototype.myBind = function(context) {
  if (typeof this !== "function") {
    console.error("type error")
  }
  let fn = this let args = [...arguments].slice(1) return function Fn() {
    return fn.apply(this instanceof Fn ? this: context, args.concat(...arguments));
  }
}
```

### 18.è¿ç»­å¤šä¸ª bindï¼Œæœ€å this æŒ‡å‘æ˜¯ä»€ä¹ˆ

æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œæœ€ç»ˆå‡½æ•°çš„ this åªä¼šå–ç¬¬ä¸€æ¬¡çš„ bind æ–¹æ³•çš„å‚æ•°

### 19. js çš„ä½œç”¨åŸŸ
#### ç›¸å…³é—®é¢˜
è§£é‡Šä¸€ä¸‹jsä¸­çš„ä½œç”¨åŸŸ
#### æ¦‚å¿µ
åœ¨JavaScriptä¸­ï¼Œä½œç”¨åŸŸï¼ˆScopeï¼‰æ˜¯æŒ‡åœ¨ç¨‹åºä¸­å®šä¹‰å˜é‡çš„å¯è§èŒƒå›´ã€‚
#### æ·±å…¥çŸ¥è¯†ç‚¹
JavaScriptä¸­ä½œç”¨åŸŸå¯ä»¥åˆ†ä¸ºå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸã€‚
å…¨å±€ä½œç”¨åŸŸæ˜¯æŒ‡åœ¨ä»£ç ä¸­ä»»æ„åœ°æ–¹éƒ½å¯ä»¥è®¿é—®çš„å˜é‡ï¼Œå®ƒä»¬åœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½æ˜¯å¯è§çš„ã€‚
å‡½æ•°ä½œç”¨åŸŸæ˜¯æŒ‡åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œåœ¨å‡½æ•°å¤–éƒ¨æ— æ³•è®¿é—®è¿™äº›å˜é‡ã€‚
å—çº§ä½œç”¨åŸŸæ˜¯åœ¨ES6ä¸­æå‡ºçš„ï¼Œæ˜¯æŒ‡åœ¨ä»£ç å—ï¼ˆé€šå¸¸æ˜¯æŒ‡ç”¨èŠ±æ‹¬å·åŒ…å«çš„è¯­å¥é›†åˆï¼‰ä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¯¥ä»£ç å—ä¸­è®¿é—®ï¼Œä»£ç å—å¤–æ— æ³•è®¿é—®è¿™äº›å˜é‡ã€‚å¯ä»¥ä½¿ç”¨letæˆ–constå¯ä»¥åˆ›å»ºå—çº§ä½œç”¨åŸŸã€‚
#### æ€»ç»“æ”¶æ•›
JavaScriptä¸­ï¼Œå˜é‡çš„ä½œç”¨åŸŸæ˜¯ç”±å®ƒä»¬åœ¨ä»£ç ä¸­å£°æ˜çš„ä½ç½®æ‰€å†³å®šçš„ã€‚å½“ç¨‹åºæ‰§è¡Œæ—¶ï¼ŒJavaScriptå¼•æ“ä¼šæ ¹æ®å˜é‡å£°æ˜çš„ä½ç½®æ¥ç¡®å®šå˜é‡çš„ä½œç”¨åŸŸã€‚
é€šå¸¸ï¼Œletå’Œconstå˜é‡åœ¨å£°æ˜çš„ä½ç½®ä¸‹æ–¹çš„ä»£ç éƒ½å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œè€Œåœ¨å£°æ˜ä½ç½®ä¸Šæ–¹çš„ä»£ç åˆ™æ— æ³•è®¿é—®è¯¥å˜é‡ã€‚

### 19.è°ˆè°ˆä½ å¯¹ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾çš„ç†è§£

å…³é”®è¯ï¼šä½œç”¨åŸŸæ˜¯ä»€ä¹ˆã€å­˜å‚¨å˜é‡è®¿é—®å˜é‡çš„è§„åˆ™æ˜¯ä»€ä¹ˆã€ç¼–è¯‘é˜¶æ®µå’Œæ‰§è¡Œé˜¶æ®µã€å…¨å±€ã€å‡½æ•°ã€å—çº§

#### 1ã€ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ(é‡ç‚¹)

ä½œç”¨åŸŸæ˜¯ä¸€å¥—è§„åˆ™ï¼Œå¯ä»¥å­˜å‚¨å˜é‡ã€è®¿é—®å˜é‡çš„è§„åˆ™ã€‚

#### 2ã€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨ JavaScript åº•å±‚å½“ä¸­ï¼Œç¨‹åºä¸­çš„ä»£ç åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€ä»£ç ç”Ÿæˆ

è¯æ³•åˆ†æï¼šå°±æ˜¯å°†ä»£ç æ‹†æˆæœ€å°çš„ã€ä¸å¯å†åˆ†çš„è¯æ³•å•å…ƒï¼ˆtokenï¼‰ã€‚æ¯”å¦‚ var name = â€œhelloâ€,å°±ä¼šè¢«åˆ†æˆå››ä¸ªè¯æ³•å•å…ƒï¼Œvar name = "hello"ï¼›å¹¶ä¸”åœ¨ JavaScript ä¸­ï¼Œç©ºæ ¼æ˜¯ç›´æ¥è¢«å¿½ç•¥çš„

è¯­æ³•åˆ†æï¼šå°±æ˜¯å°†ä¸Šä¸€æ­¥çš„è¯æ³•å•å…ƒæ•°æ®ï¼Œæ ¹æ®è¯­æ³•è§„åˆ™ç”Ÿæˆ ASTã€‚å¦‚æœæºç å¤åˆè¯­æ³•è§„åˆ™ï¼Œè¿™ä¸€æ­¥å°±ç›´æ¥å®Œæˆï¼Œå¦‚æœå­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œè¿™ä¸€æ­¥å°±ä¼šè¢«ç»ˆæ­¢ï¼Œå¹¶ä¸”æŠ›å‡ºè¯­æ³•é”™è¯¯

ä»£ç ç”Ÿæˆï¼šå°±æ˜¯å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ AST è½¬æ¢æˆçœŸæ­£å¯ä»¥è¿è¡Œçš„ä»£ç ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°† AST è½¬æ¢æˆä¸€ç»„æœºå™¨æŒ‡ä»¤ï¼Œä¾‹å¦‚ var name = â€œhelloâ€ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ª name å˜é‡ï¼ˆéœ€è¦ç»™ name åˆ†é…å†…å­˜ï¼‰ï¼Œå¹¶å°†ä¸€ä¸ªå€¼å­˜å‚¨åˆ° name ä¸­ã€‚

#### 3ã€ä»€ä¹ˆæ˜¯ç¼–è¯‘é˜¶æ®µå’Œæ‰§è¡Œé˜¶æ®µ

ç¼–è¯‘é˜¶æ®µï¼šç¼–è¯‘å™¨ä¼šæ‰¾éå½“å‰ä½œç”¨åŸŸï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ª name å˜é‡ï¼Œå¦‚æœæœ‰åˆ™å¿½ç•¥ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šåœ¨ä½œç”¨åŸŸç«‹åˆ›å»ºä¸€ä¸ª name å˜é‡ï¼Œç„¶åç¼–è¯‘å™¨ä¼šä¸ºå¼•æ“ç”Ÿæˆå¯ä»¥è¿è¡Œçš„ä»£ç ï¼Œç„¶åè¿›å…¥æ‰§è¡Œé˜¶æ®µ

æ‰§è¡Œé˜¶æ®µï¼šjs å¼•æ“åœ¨æ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œä»ç„¶ä¼šç»§ç»­æŸ¥æ‰¾å½“å‰ä½œç”¨åŸŸï¼Œï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ª name çš„å˜é‡ã€‚å¦‚æœèƒ½æ‰¾åˆ°ï¼Œå°±ç»™ä»–èµ‹å€¼ï¼›å¦‚æœæ‰¾ä¸åˆ°ï¼Œjs å¼•æ“å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸

#### 4ã€ä½œç”¨åŸŸé“¾æ˜¯ä»€ä¹ˆï¼Ÿ(é‡ç‚¹)

å½“è®¿é—®å˜é‡çš„ä½œç”¨åŸŸçš„æ—¶å€™ï¼Œå¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸæ²¡æ‰¾åˆ°ï¼Œå°±ä¼šç»§ç»­å‘ä¸Šçº§æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡æˆ–è€…ä¸å­˜åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­ï¼Œè¿™æ ·çš„é“¾è·¯å°±æ˜¯ä½œç”¨åŸŸé“¾

#### 5ã€æœ‰å“ªäº›ä½œç”¨åŸŸï¼Ÿ(é‡ç‚¹)

å…¨å±€ä½œç”¨åŸŸï¼šå®šä¹‰çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯æŒ‚è½½åœ¨ window å¯¹è±¡ä¸Šï¼Œå…·æœ‰å…¨å±€ä½œç”¨åŸŸã€‚å¹¶ä¸”å¦‚æœæ²¡æœ‰å£°æ˜ç›´æ¥èµ‹å€¼çš„å˜é‡ä¹Ÿæ˜¯å…¨å±€å˜é‡ã€‚

å‡½æ•°ä½œç”¨åŸŸï¼šå®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œå…·æœ‰å‡½æ•°ä½œç”¨åŸŸã€‚å¹¶ä¸”åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡ä¹Ÿä¼šè¢«é”€æ¯

å—çº§ä½œç”¨åŸŸï¼šes6 æå‡ºçš„ let const å…³é”®è¯å…·æœ‰å—çº§ä½œç”¨åŸŸã€‚ä»–ä»¬å®šä¹‰çš„å˜é‡åªèƒ½åœ¨å—çº§ä½œç”¨åŸŸå†…æ‰èƒ½è®¿é—®ã€‚ if è¯­å¥åŠ for è¯­å¥åé¢ {} è¿™é‡Œé¢æ‰€åŒ…æ‹¬çš„ä¹Ÿæ˜¯å—çº§ä½œç”¨åŸŸ

#### 6ã€æš‚æ—¶æ€§æ­»åŒºå’Œå˜é‡æå‡æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

å˜é‡æå‡ï¼šä½¿ç”¨ var å®šä¹‰çš„å˜é‡å­˜åœ¨å˜é‡æå‡ï¼Œ// a = 1

æš‚æ—¶æ€§æ­»åŒºï¼šå¦‚æœä½¿ç”¨ let æˆ– const å®šä¹‰çš„å˜é‡ï¼Œåˆ™ä¼šå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºã€‚èµ·å§‹åŸŸå‡½æ•°å¼€å¤´ï¼Œç»ˆæ­¢äºç›¸å…³å˜é‡å£°æ˜çš„è¿™ä¸€è¡Œï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…æ— æ³•è®¿é—®è¯¥å˜é‡


### 20.é—­åŒ…çš„ä½œç”¨å’ŒåŸç†ä»¥åŠä½¿ç”¨åœºæ™¯
#### 1ã€é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ
é—­åŒ…æ˜¯æŒ‡åœ¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œå¹¶ä¸”è¯¥å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°å†…éƒ¨çš„å˜é‡å’Œå‚æ•°ã€‚åœ¨jsä¸­ï¼Œç”±äºå‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œä»è€Œå½¢æˆé—­åŒ…ã€‚
#### è®²æ¦‚å¿µï¼ˆçŸ¥è¯†ç‚¹æ·±å…¥ï¼‰
é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚ä¼˜ç‚¹æ˜¯ç§æœ‰åŒ–æ•°æ®ï¼Œåœ¨ç§æœ‰åŒ–æ•°æ®çš„åŸºç¡€ä¸Šä¿å­˜æ•°æ®ã€‚ç¼ºç‚¹æ˜¯ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œåœ¨ä¸éœ€è¦ç”¨åˆ°çš„æ—¶å€™åŠæ—¶çš„æŠŠå˜é‡ç½®ä¸ºnullã€‚

#### è¯¦ç»†æ¥è¯´ï¼ˆä½œç”¨ï¼‰ï¼š
é—­åŒ…å¯ä»¥å°†å˜é‡å’Œå‡½æ•°ç§æœ‰åŒ–ï¼Œä»è€Œé¿å…å‘½åå†²çªå’Œå˜é‡æ±¡æŸ“ã€‚å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡å’Œå‡½æ•°ä»ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œä¸ä¼šè¢«è‡ªåŠ¨å›æ”¶ï¼Œå› ä¸ºå¯ä»¥è¢«å…¶ä»–å‡½æ•°ç»§ç»­è®¿é—®å’Œä½¿ç”¨è¿™ä¸ªæœºåˆ¶æˆä¸ºé—­åŒ…ã€‚

##### é—­åŒ…çš„åŸç†
é—­åŒ…çš„åŸç†æ˜¯å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªåŒ…å«å‡½æ•°å’Œå˜é‡çš„ç¯å¢ƒï¼Œå½“å‡½æ•°è¿”å›åï¼Œè¯¥ç¯å¢ƒä»ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œå› æ­¤å¯ä»¥è¢«å…¶ä»–å‡½æ•°è®¿é—®å’Œä½¿ç”¨ã€‚é—­åŒ…ä¸­çš„å˜é‡å’Œå‡½æ•°å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨å’Œä¿®æ”¹ï¼Œå› æ­¤å¯ä»¥å®ç°è®¸å¤šé«˜çº§åŠŸèƒ½ã€‚

#### é—­åŒ…çš„ä½¿ç”¨åœºæ™¯ï¼š

é—­åŒ…çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼‚æ­¥ç¼–ç¨‹å’Œæ¨¡å—åŒ–å¼€å‘ä¸­ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼š
1. ä¿å­˜å˜é‡çŠ¶æ€å’Œç§æœ‰åŒ–å˜é‡å’Œå‡½æ•°(ğŸŒ°ï¼švueä¸­çš„dataå‡½æ•°)ã€‚
2. ç”¨äºäº‹ä»¶å¤„ç†å’Œå›è°ƒå‡½æ•°ï¼ˆğŸŒ°ï¼šreturn ä¸€ä¸ªå‡½æ•°å‡ºå»ï¼Œåªè¦ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯ä½¿ç”¨é—­åŒ…ï¼ŒèŠ‚æµå’Œé˜²æŠ–ï¼‰
3. ç”¨äºå°è£…ç±»å’Œæ¨¡å—ã€‚ï¼ˆğŸŒ°ï¼šexportå‡ºå»ï¼Œå†é€šè¿‡importå¼•å…¥ï¼Œå…¶å®å°±æ˜¯ç”¨äº†é—­åŒ…ï¼ŒIIFEï¼‰
4. ç”¨äºå®ç°æŸ¯é‡ŒåŒ–å’Œå‡½æ•°å¼ç¼–ç¨‹ã€‚ï¼ˆğŸŒ°ï¼šçº¯å‡½æ•°ï¼Œæ•°å­¦å‡½æ•°çš„æ±‚å€¼è¿‡ç¨‹ï¼ŒæŠŠå¤šä¸ªå‚æ•°å˜æˆäº†ä¸€ä¸ªå‚æ•°ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åŒ…è£…äº†ä¸€å±‚ï¼Œreturn äº†ä¸€ä¸ªå‡½æ•°å‡ºå»ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯é‚£äº›å‚æ•°ï¼‰
5. ç”¨äºè§£å†³å¾ªç¯ä¸­å¼‚æ­¥é—®é¢˜ï¼ˆğŸŒ°ï¼šsetTimeoutä¸­å¾ªç¯iï¼ˆ1-6ï¼‰ï¼Œè¾“å‡ºiä¸ºï¼ˆ1-6ï¼‰çš„ä¾‹å­ï¼‰
6. ç”¨äºå®ç°ç¼“å­˜å’Œè®°å¿†åŒ–ç­‰åŠŸèƒ½ã€‚

#### æ³¨æ„äº‹é¡¹
é—­åŒ…ä¼šå ç”¨å†…å­˜å¹¶ä¸”å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œå› æ­¤åœ¨ä½¿ç”¨é—­åŒ…æ˜¯éœ€è¦æ³¨æ„å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–ç­‰é—®é¢˜ã€‚

### æ‹“å±•
#### Vueå’ŒReactä¸­çš„é—­åŒ…
Vueçš„ç»„ä»¶å®šä¹‰ä¸­ï¼Œä¼šç”¨åˆ°dataå‡½æ•°æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œåœ¨ç»„ä»¶å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªå®ä¾‹éƒ½å›å¾—åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®å¯¹è±¡ã€‚
Reactä¸­ï¼Œç”±äºå‡½æ•°ç»„ä»¶æ²¡æœ‰è‡ªå·±çš„å®ä¾‹ï¼Œæ‰€ä»¥ä½¿ç”¨useStateå’ŒuseEffectç­‰Hookæ—¶ï¼Œä¹Ÿä¼šç”¨åˆ°é—­åŒ…çš„æ¦‚å¿µæ¥ä¿å­˜ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ã€‚

Vueå’ŒReactéƒ½æ˜¯å“åº”å¼æ¡†æ¶ï¼Œä¼šè‡ªåŠ¨å¤„ç†è§†å›¾çš„æ›´æ–°ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¼šç”¨åˆ°é—­åŒ…ã€‚
æ¯”å¦‚ï¼š
Vueä¸­ä¼šä¸ºæ¯ä¸ªç»„ä»¶åˆ›å»ºä¸€ä¸ªWatcherå¯¹è±¡æ¥ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œè¿™ä¸ªWatcherå¯¹è±¡å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå®ƒæŒæœ‰ç»„ä»¶å®ä¾‹ã€æ¸²æŸ“å‡½æ•°ä»¥åŠéœ€è¦ç›‘å¬çš„æ•°æ®ï¼Œä»è€Œå®ç°äº†è‡ªåŠ¨æ›´æ–°è§†å›¾çš„åŠŸèƒ½ã€‚
Reactä¸­ï¼Œä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶ï¼Œå³ä½¿ç”¨useEffectçš„Hookï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“æ—¶æ‰§è¡Œä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ï¼Œå¹¶å°†è¿™ä¸ªå‡½æ•°å­˜å‚¨åœ¨ç»„ä»¶å®ä¾‹ä¸­ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶æ¯”è¾ƒå‰åä¸¤ä¸ªå‰¯ä½œç”¨å‡½æ•°æ˜¯å¦ç›¸åŒï¼Œä»è€Œå†³å®šæ˜¯å¦æ‰§è¡Œå®ƒä»¬ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¼šç”¨åˆ°é—­åŒ…çš„æ¦‚å¿µã€‚
#### é—­åŒ…ä¸€å®šä¼šé€ æˆå†…å­˜æ³„æ¼å—
ä¸æ˜¯æ‰€æœ‰é—­åŒ…éƒ½å›é€ æˆå†…å­˜æ³„æ¼ï¼Œåªæœ‰åœ¨ä¸æ­£ç¡®ä½¿ç”¨é—­åŒ…çš„æƒ…å†µä¸‹æ‰ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚
å¦‚æœè¿”å›çš„å†…éƒ¨å‡½æ•°åœ¨å¤–éƒ¨å‡½æ•°æ‰§è¡Œç»“æŸåä»ç„¶å­˜åœ¨ï¼Œé‚£ä¹ˆå®ƒä¼šä¸€ç›´æŒæœ‰å¤–éƒ¨å‡½æ•°å˜é‡çš„å¼•ç”¨ï¼Œå¯¼è‡´è¿™äº›å˜é‡æ— æ³•è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œä»è€Œé€ æˆå†…å­˜æ³„æ¼ã€‚
```js
function outer(){
	var count = 0
	return function inner(){
		count++
		console.log(count)
	}
}

var fn = outer()
fn() // 1 æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯fnä¸­countä»ç„¶è¢«å¼•ç”¨ç€ï¼Œå¦‚æœå·²ç»ç»“æŸä½¿ç”¨ï¼Œå¯ä»¥ç½®ç©ºå¼•ç”¨ï¼Œå¦‚ fn = null
```
#### ä½¿ç”¨é‚£äº›æ–¹å¼å¯ä»¥é˜²æ­¢é—­åŒ…å¼•èµ·çš„å†…å­˜æ³„æ¼

1. é¿å…åˆ›å»ºä¸å¿…è¦çš„é—­åŒ…ï¼š å¦‚æœé—­åŒ…ä¸­åŒ…å«çš„å˜é‡åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåä¸å†éœ€è¦ä½¿ç”¨ï¼Œå¯ä»¥é¿å…åˆ›å»ºé—­åŒ…ï¼Œä»è€Œé¿å…å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚
2. åŠæ—¶é‡Šæ”¾é—­åŒ…ï¼šåœ¨ä½¿ç”¨é—­åŒ…æ—¶ï¼Œåœ¨ä¸éœ€è¦æ—¶åŠæ—¶é‡Šæ”¾é—­åŒ…ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡èµ‹å€¼ä¸ºnullæˆ–è€…æ‰‹åŠ¨è§£é™¤å¯¹é—­åŒ…çš„å¼•ç”¨ï¼ˆå¦‚æš´éœ²ä¸€ä¸ªå°†å¼•ç”¨èµ‹å€¼ä¸ºnullçš„å‡½æ•°å¹¶è°ƒç”¨ï¼‰ç­‰æ–¹å¼æ¥é‡Šæ”¾é—­åŒ…ã€‚
3. ä½¿ç”¨æ¨¡å—æ¨¡å¼ï¼šåœ¨æ¨¡å—æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨IIFE(Immediately Invoked Function Expression)ç«‹å³æ‰§è¡Œå‡½æ•°(function(){...})() æ¥åˆ›å»ºä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œä»è€Œé¿å…é—­åŒ…ä¸­çš„å˜é‡è¢«å¤–éƒ¨è®¿é—®ï¼Œé¿å…äº†å†…å­˜æ³„æ¼é—®é¢˜ã€‚
4. é¿å…å¾ªç¯å¼•ç”¨ï¼šå¦‚æœé—­åŒ…ä¸­å¼•ç”¨äº†DOMå…ƒç´ æˆ–å…¶ä»–å¯¹è±¡ï¼Œéœ€è¦ç¡®ä¿åœ¨ä¸éœ€è¦æ—¶åŠæ—¶é‡Šæ”¾è¿™äº›å¯¹è±¡ï¼Œé¿å…å¾ªç¯å¼•ç”¨é€ æˆå†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚
å…¶ä»–çš„ä¾‹å­ï¼š 
ä»»ä½•å¼‚æ­¥ä¸­ï¼Œåªè¦ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯ä½¿ç”¨é—­åŒ…ï¼Œé˜²æŠ–å’ŒèŠ‚æµï¼Œä»¥åŠvueåº•å±‚éƒ½ä½¿ç”¨äº†

â…°.åœ¨å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ã€Ajaxè¯·æ±‚ã€web workersã€ä»»ä½•å¼‚æ­¥ä¸­ï¼Œåªè¦ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯ä½¿ç”¨é—­åŒ…ï¼Œé˜²æŠ–å’ŒèŠ‚æµï¼Œä»¥åŠvueåº•å±‚éƒ½ä½¿ç”¨äº†
```js
// å®šæ—¶å™¨
setTimeout(function handler(){
  console.log('1');
}ï¼Œ1000);
// äº‹ä»¶ç›‘å¬
document.getElementById(app).addEventListener('click', () => {
  console.log('Event Listener');
});
```

â…±.ä½œä¸ºå‡½æ•°å‚æ•°çš„ä¼ é€’çš„å½¢å¼

```js
var a = 1;
function foo(){
  var a = 2;
  function baz(){
    console.log(a);
  }
  bar(baz);
}
function bar(fn){
  // è¿™æ˜¯é—­åŒ…
  fn();
}
foo();  // è¾“å‡º2ï¼Œè€Œä¸æ˜¯1
```

â…².ç«‹å³æ‰§è¡Œå‡½æ•°ï¼šåˆ›å»ºäº†é—­åŒ…ï¼Œä¿å­˜äº†å…¨å±€ä½œç”¨åŸŸå’Œå½“å‰ä½œç”¨åŸŸï¼Œå› æ­¤å¯ä»¥è¾“å‡ºå…¨å±€çš„å˜é‡ã€‚

```js
var a = 2;
(function IIFE(){
  console.log(a);  // è¾“å‡º2
})();
```

â…³.ç»“æœç¼“å­˜ï¼ˆå¤‡å¿˜æ¨¡å¼ï¼‰

```js
function memorize (fn){
  var cache ={}
  return function(...args){
    var key = JSON.strify(args)
    return cache[key] || cache[key] = fn.apply(fn,args)
  }
}
function add (a){
  return a +1
}
var adder = memorize(add)
adder(1)  // è¾“å‡º: 2    å½“å‰: cache: { '[1]': 2 }
adder(1)  // è¾“å‡º: 2    å½“å‰: cache: { '[1]': 2 }
adder(2)  // è¾“å‡º: 3    å½“å‰: cache: { '[1]': 2, '[2]': 3 }
```

v. å¸¸è§çš„é—­åŒ…çš„å¾ªç¯è¾“å‡ºçš„é—®é¢˜

```js
for(var i = 1; i <= 5; i ++){
  setTimeout(function() {
    console.log(i)
  }, 0)
}
è¾“å‡º5ä¸ª6
è§£å†³åŠæ³•ï¼š
1ã€åˆ©ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°
for(var i = 1; i <= 5; i ++){
  (function(j){
    setTimeout(function() {
      console.log(j)
    }, 0)
  })(i)
}
2ã€ä½¿ç”¨es6çš„let
3ã€ä½¿ç”¨å®šæ—¶å™¨çš„ç¬¬ä¸‰ä¸ªå‚æ•°
for(var i=1;i<=5;i++){
  setTimeout(function(j) {
    console.log(j)
  }, 0, i)
}
å®šæ—¶å™¨çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„é™„åŠ å‚æ•°å­˜åœ¨
```

### 22.ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°æœ‰å•¥åŒºåˆ«ï¼Ÿç®­å¤´å‡½æ•°èƒ½å½“æ„é€ å‡½æ•°å—ï¼Ÿ
åŒºåˆ«ï¼š
1. ç®­å¤´å‡½æ•°æ¯”æ™®é€šå‡½æ•°æ›´åŠ ç®€æ´ï¼š
ç®­å¤´å‡½æ•°è¿”å›å€¼åªæœ‰ä¸€å¥ï¼Œç›´æ¥å¯ä»¥çœç•¥å¤§æ‹¬å·ã€‚å¦‚æœä¸éœ€è¦è¿”å›å€¼ç›´æ¥åŠ ä¸Švoidå°±å¯ä»¥äº†
2. ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œç®­å¤´çš„å‡½æ•°çš„thisæŒ‡å‘æ°¸è¿œä¸ä¼šè¢«æ”¹å˜ï¼Œcallã€applyã€bindç­‰æ–¹æ³•ä¸ä¼šæ”¹å˜ç®­å¤´å‡½æ•°thisçš„æŒ‡å‘
ç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„thisï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰thisï¼Œå®ƒåªä¼šç»§æ‰¿è‡ªå·±ä½œç”¨åŸŸçš„ä¸Šä¸€å±‚ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°åœ¨åˆ›å»ºçš„æ—¶å€™thisæŒ‡å‘å°±å·²ç»å®šä¹‰å¥½äº†
1. ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼šå› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œæ‰€ä»¥ä¼šæŠ¥é”™
2. ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„argumentsï¼šç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„argumnetså¯¹è±¡ï¼Œåœ¨ç®­å¤´å‡½æ•°ä¸­è®¿é—®çš„å®é™…ä¸Šè·å¾—çš„æ˜¯å®ƒå¤–å±‚å‡½æ•°çš„argumentså€¼
3. ç®­å¤´å‡½æ•°æ²¡æœ‰prototype
4. ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºGenratorå‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨yieldå…³é”®å­—

### 23.es6æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ
1. letã€const
2. æ¨¡ç‰ˆå­—ç¬¦ä¸²
3. è§£æ„èµ‹å€¼
4. å‡½æ•°è®¾ç½®é»˜è®¤å€¼
5. ...è¿ç®—ç¬¦
6. ç®­å¤´å‡½æ•°
7. for of
    - for of ä¸èƒ½éå†å¯¹è±¡ï¼Œå¯ä»¥éå†æ•°ç»„
    - for in éå†å¾—åˆ°çš„æ˜¯ä¸‹æ ‡æˆ–è€…æ˜¯å¯¹è±¡çš„key
    - å¯è¿­ä»£å¯¹è±¡å¯ä»¥ä½¿ç”¨for of
    - 
    - for of ä¸åŒä¸forEachï¼Œå‰è€…å¯ä»¥ä½¿ç”¨breakã€continueã€returné…åˆä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥éšæ—¶è·³å‡ºå¾ªç¯
8. classç±»ï¼ŒåŸå‹é“¾çš„è¯­æ³•ç³–çš„è¡¨ç°å½¢å¼
9. å¯¼å…¥å¯¼å‡º export default ã€import
10. Promise
11. async å’Œ await
12. Symbol æ–°çš„åŸºæœ¬ç±»å‹
13. Seté›†åˆ

### 24.Mapå’ŒObjectçš„åŒºåˆ«
å…³é”®è¯ï¼š$\color{red} é”®å€¼åŒºåˆ«ã€é•¿åº¦å¤§å°è·å–ã€åŸå‹ã€é¡ºåºã€å¾ªç¯ï¼ˆè¿­ä»£å™¨ï¼‰$
1. Objectçš„é”®å¿…é¡»æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ˜¯ symbolï¼‰ï¼Œä½†æ˜¯Mapçš„é”®å¯ä»¥æ˜¯ JavaScript æ”¯æŒçš„æ‰€æœ‰æ•°æ®ç±»å‹
2. Mapçš„é•¿åº¦å¤§å°å¯ä»¥é€šè¿‡sizeæ¥è·å–ï¼Œä½†æ˜¯Objectåˆ™éœ€è¦é€šè¿‡Object.keys(obj).length
3. Objectçš„é”®å€¼å¯èƒ½ä¼šå’ŒåŸå‹ä¸Šçš„å±æ€§é‡åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Object.createï¼ˆnullï¼‰æ¥è®¾ç½®æ²¡æœ‰åŸå‹çš„å¯¹è±¡
4. Objectçš„keyçš„é¡ºåºæ˜¯å…ˆåˆ¤æ–­æ•°å­—å¼€å¤´çš„keyï¼Œå†åˆ¤æ–­å­—ç¬¦ä¸²ï¼Œè€ŒMapçš„é¡ºåºæ˜¯åœ¨æ’å…¥æ—¶å†³å®šçš„
5. Mapç»“æ„çš„æ•°æ®å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨æ¯”å¦‚for ofæ¥å¾ªç¯ï¼Œè€ŒObjectåˆ™éœ€è¦æ‰‹åŠ¨éå†ï¼Œç”¨for in
6. Mapåœ¨é¢‘ç¹å¢åˆ é”®å€¼å¯¹çš„åœºæ™¯ä¸‹è¡¨ç°æ›´å¥½ã€‚
ç»¼ä¸Šæ‰€è¯‰ï¼šå¦‚æœéœ€è¦å­˜å‚¨ä¸åŒçš„é”®å€¼å¹¶ä¸”ä¿æŒæ’å…¥é¡ºåºçš„è¯ç”¨Mapä¼šæ›´åŠ çµæ´»

### 27.symbolè¿™ä¸ªæ–°å¢çš„åŸºç¡€æ•°æ®ç±»å‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿä½¿ç”¨åœºæ™¯
è§£é‡Šï¼šSymbolæ˜¯ES6ä¸­å¼•å…¥çš„æ–°æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå”¯ä¸€å¾—å¸¸é‡ï¼Œé€šè¿‡Symbolå‡½æ•°æ¥åˆ›å»ºå¯¹åº”çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™æ·»åŠ å˜é‡æè¿°ï¼Œè¯¥å˜é‡ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå˜é‡ä¸ºä»€ä¹ˆä¼šè¢«å¼ºåˆ¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè½¬æ¢ï¼‰
ç”¨æ³•ï¼šå¸¸é‡å€¼å’Œå¯¹è±¡å±æ€§
1. é¿å…å¸¸é‡å€¼é‡å¤
2. é¿å…å¯¹è±¡å±æ€§è¦†ç›–ï¼šç»™å‡½æ•°çš„å‚æ•°èµ‹å€¼ï¼Œå¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”åŒ…å«ç›¸åŒå±æ€§ï¼Œå°±å¯ä»¥åˆ©ç”¨Symbolæ¥èµ‹å€¼å’Œè¯»å–

### 28ã€jsè„šæœ¬å¼‚æ­¥åŠ è½½å¦‚ä½•å®ç°ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
1. å½“scriptä¸Šæ²¡æœ‰deferæˆ–è€…asyncçš„æ—¶å€™ï¼Œæµè§ˆå™¨åœ¨æ‰§è¡Œè„šæœ¬çš„æ—¶å€™ä¼šé˜»å¡åç»­æ–‡æ¡£çš„åŠ è½½ã€‚å½“å­˜åœ¨deferæˆ–asyncçš„æ—¶å€™éƒ½æ˜¯å¼‚æ­¥åŠ è½½ï¼Œå®ƒä»¬ä¸ä¼šé˜»å¡é¡µé¢çš„è§£æï¼š
åŒºåˆ«ï¼š
    1ã€æ‰§è¡Œé¡ºåºï¼šå¤šä¸ªasyncå±æ€§ä¸ä¼šä¿è¯æ‰§è¡Œçš„é¡ºåºï¼Œå¤šä¸ªdeferå±æ€§ä¼šä¿è¯æ‰§è¡Œçš„é¡ºåº
    2ã€è„šæœ¬æ˜¯å¦å¹¶è¡Œæ‰§è¡Œï¼šasyncä¼šå¼‚æ­¥ä¸‹è½½è§£æè„šæœ¬ï¼ˆå³åŠ è½½åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹ä¸­å’Œjsè„šæœ¬çš„åŠ è½½æ˜¯å¹¶è¡Œè¿›è¡Œï¼‰ï¼›è€Œdeferè¡¨ç¤ºå»¶è¿ŸåŠ è½½ï¼Œè„šæœ¬ä¼šå…ˆä¸æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰åˆ°æ–‡æ¡£è§£æå®Œæˆåå†å»æ‰§è¡Œã€‚
2. JavaScriptè„šæœ¬å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ
å»¶è¿ŸåŠ è½½å°±æ˜¯ç­‰é¡µé¢åŠ è½½å®Œæˆä¹‹åå†åŠ è½½ JavaScript æ–‡ä»¶ã€‚ js å»¶è¿ŸåŠ è½½æœ‰åŠ©äºæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚
ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š
* defer å±æ€§ï¼šç»™ js è„šæœ¬æ·»åŠ  defer å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šè®©è„šæœ¬çš„åŠ è½½ä¸æ–‡æ¡£çš„è§£æåŒæ­¥è§£æï¼Œç„¶ååœ¨æ–‡æ¡£è§£æå®Œæˆåå†æ‰§è¡Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œè¿™æ ·çš„è¯å°±èƒ½ä½¿é¡µé¢çš„æ¸²æŸ“ä¸è¢«é˜»å¡ã€‚å¤šä¸ªè®¾ç½®äº† defer å±æ€§çš„è„šæœ¬æŒ‰è§„èŒƒæ¥è¯´æœ€åæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œä½†æ˜¯åœ¨ä¸€äº›æµè§ˆå™¨ä¸­å¯èƒ½ä¸æ˜¯è¿™æ ·ã€‚
* async å±æ€§ï¼šç»™ js è„šæœ¬æ·»åŠ  async å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šä½¿è„šæœ¬å¼‚æ­¥åŠ è½½ï¼Œä¸ä¼šé˜»å¡é¡µé¢çš„è§£æè¿‡ç¨‹ï¼Œä½†æ˜¯å½“è„šæœ¬åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œ js è„šæœ¬ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæ–‡æ¡£æ²¡æœ‰è§£æå®Œæˆçš„è¯åŒæ ·ä¼šé˜»å¡ã€‚å¤šä¸ª async å±æ€§çš„è„šæœ¬çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œä¸€èˆ¬ä¸ä¼šæŒ‰ç…§ä»£ç çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚
* åŠ¨æ€åˆ›å»º DOM æ–¹å¼ï¼šåŠ¨æ€åˆ›å»º DOM æ ‡ç­¾çš„æ–¹å¼ï¼Œå¯ä»¥å¯¹æ–‡æ¡£çš„åŠ è½½äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå½“æ–‡æ¡£åŠ è½½å®Œæˆåå†åŠ¨æ€çš„åˆ›å»º script æ ‡ç­¾æ¥å¼•å…¥ js è„šæœ¬ã€‚
* ä½¿ç”¨ setTimeout å»¶è¿Ÿæ–¹æ³•ï¼šè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨æ¥å»¶è¿ŸåŠ è½½jsè„šæœ¬æ–‡ä»¶
* è®© JS æœ€ååŠ è½½ï¼šå°† js è„šæœ¬æ”¾åœ¨æ–‡æ¡£çš„åº•éƒ¨ï¼Œæ¥ä½¿ js è„šæœ¬å°½å¯èƒ½çš„åœ¨æœ€åæ¥åŠ è½½æ‰§è¡Œã€‚

### 29.for in ã€for ofçš„åŒºåˆ«ï¼Ÿmapå’ŒforEachå¯ä»¥é€šè¿‡breakè·³å‡ºå—ï¼Ÿ
for of æ˜¯ES6æ–°å¢çš„éå†æ–¹å¼ï¼Œå…è®¸éå†å«æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼ˆæ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰å¹¶ä¸”è¿”å›å„é¡¹çš„å€¼
åŒºåˆ«ï¼š
1. for of éå†è·å–çš„æ˜¯å¯¹è±¡çš„é”®å€¼ï¼Œfor in è·å–çš„æ˜¯å¯¹è±¡çš„é”®åï¼ˆkeyï¼‰
2. for in ä¼šéå†å¯¹è±¡çš„æ•´ä¸ªåŸå‹é“¾ï¼Œæ€§èƒ½å¾ˆå·®ä¸æ¨èä½¿ç”¨ï¼Œè€Œfor of åªéå†å½“å‰å¯¹è±¡ä¸ä¼šéå†åŸå‹é“¾
3. å¯¹äºæ•°ç»„çš„éå†ï¼Œfor inä¼šè¿”å›æ•°ç»„ä¸­å¯æšä¸¾çš„å±æ€§ï¼ˆåŒ…æ‹¬åŸå‹é“¾ä¸Šï¼‰ï¼Œfor ofåªè¿”å›æ•°ç»„çš„ä¸‹æ ‡å¯¹åº”çš„å±æ€§å€¼
æ€»ç»“ï¼šfor in å¾ªç¯ä¸»è¦æ˜¯ä¸ºäº†éå†å¯¹è±¡ï¼Œä¸é€‚ç”¨éå†æ•°ç»„ï¼›for ofå¾ªç¯å¯ä»¥ç”¨æ¥éå†æ•°ç»„ã€ç±»æ•°ç»„ã€å­—ç¬¦ä¸²ã€Setã€Mapä»¥åŠå«æœ‰iteratoræ¥å£çš„å¯¹è±¡

map å’ŒforEachæ— æ³•ä½¿ç”¨return æˆ–breakè·³å‡ºå¾ªç¯ï¼›ä½†æ˜¯å¯ä»¥æŠ›å‡ºthrow new Errorï¼ˆï¼‰ï¼Œé€šè¿‡try catchå»æ•è·è¿™ä¸ªé”™è¯¯ç»ˆæ­¢å¾ªç¯

### 30.jså¦‚ä½•åˆ¤æ–­æ•°æ®ç±»å‹ï¼Ÿæ“ä½œæ•°ç»„å…ƒç´ çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ
1ã€åˆ¤æ–­æ•°ç»„ç±»å‹(å¾…è¡¥å……)

```js
1ã€é€šè¿‡Object.prototype.toString.call()

Object.prototype.toString.call(obj).slice(8,-1) === 'Array'

2ã€é€šè¿‡ES6çš„Array.isArray()æ¥åˆ¤æ–­

Array.isArray(obj)

3ã€é€šè¿‡åŸå‹é“¾åšåˆ¤æ–­

obj.__proto__ ===Array.prototype

4ã€é€šè¿‡instanceofæ¥åˆ¤æ–­

obj instanceof Array

5ã€é€šè¿‡Array.prototype.isPrototypeOf

Array.prototype.isPrototypeOf(obj)
```


2ã€æ“ä½œæ•°ç»„å…ƒç´ çš„æ–¹æ³•

æ”¹å˜æ•°ç»„çš„æ–¹æ³•ï¼š

pushã€popã€shiftã€unshiftã€spliceã€sortã€reverseã€fillï¼ˆå…¶ä¸­å‰ä¸ƒç§æ˜¯ï¼‰

ä¸æ”¹å˜æ•°ç»„çš„æ–¹æ³•ï¼š
concatã€everyã€someã€filterã€findã€mapã€findIndexã€forEachã€indexOfã€includesã€joinã€lastIndexOfã€reduceã€reduceRightã€sliceã€some

æ•°ç»„è½¬åŒ–æˆå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š
toLocalStringã€toStringã€valueOfã€join

æ·»åŠ è¿”å›æ•°ç»„é•¿åº¦ï¼Œè€Œåˆ é™¤åˆ™è¿”å›æ•°ç»„çš„åˆ é™¤çš„é‚£ä¸€é¡¹
sortä¸ä¼ å‚æ•°çš„æƒ…å†µä¸‹å›é€ æˆä¸å‡†ç¡®çš„æƒ…å†µï¼Œå› ä¸ºä¼šè°ƒç”¨Stingè½¬å‹å‡½æ•°
sortçš„æ¯”è¾ƒå‡½æ•°çš„åŸç†æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ’åœ¨ç¬¬äºŒä¸ªå‚æ•°å‰é¢ï¼Œåˆ™è¿”å›-1ï¼›å¦‚æœç›¸ç­‰åˆ™è¿”å›0ï¼›ç¬¬ä¸€ä¸ªå‚æ•°æ’åœ¨ç¬¬äºŒä¸ªå‚æ•°åé¢ï¼Œåˆ™è¿”å›1
sliceè¿”å›è¯¥æˆªå–çš„æ•°ç»„
spliceåˆ é™¤ã€æ›¿æ¢ã€æ’å…¥ï¼Œä¼šè¿”å›è¢«åˆ é™¤çš„æ•°ç»„
reduceæ­£åºæ‰§è¡Œï¼ŒreduceRightå€’åºæ‰§è¡Œ

### 31. 0.1+0.2ä¸ºä»€ä¹ˆä¸ç­‰äº0.3ï¼Ÿ
#### æ ¸å¿ƒ
åœ¨JavaScriptä¸­ï¼Œæµ®ç‚¹æ•°æ˜¯ä»¥IEEE754æ ‡å‡†çš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤ºçš„ï¼Œå®ƒé‡‡ç”¨äºŒè¿›åˆ¶æ¥è¡¨ç¤ºå®æ•°ã€‚è€ŒäºŒè¿›åˆ¶æ— æ³•ç²¾ç¡®çš„è¡¨ç¤ºæŸäº›åè¿›åˆ¶å°æ•°ï¼Œæ¯”å¦‚0.1å’Œ0.2ï¼Œå› ä¸ºä»–ä»¬åœ¨äºŒè¿›åˆ¶ä¸‹æ˜¯æ— é™å¾ªç¯çš„å°æ ‘ï¼Œè€Œæµ®ç‚¹æ•°åªæœ‰64ä½çš„ç²¾åº¦ã€‚
å› æ­¤ï¼Œå½“åœ¨JavaScriptä¸­æ‰§è¡Œ0.1+0.2çš„è®¡ç®—æ—¶ï¼Œç”±äºæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸¤ä¸ªæ•°å­—ï¼Œä»–ä»¬ä¼šè¢«è½¬æ¢æˆæœ€æ¥è¿‘çš„è¯¾è¡¨ç¤ºäºŒè¿›åˆ¶æ•°ï¼Œç„¶åå†è¿›è¡Œè®¡ç®—ã€‚è¿™ä¼šå¯¼è‡´ä¸€ä¸ªå¾®å°çš„èˆå…¥è¯¯å·®ï¼Œä½¿å¾—ç»“æœä¸ç­‰äº0.3
#### å¦‚ä½•è§£å†³
* å¯ä»¥ä½¿ç”¨toFixed()æ–¹æ³•å°†ç»“æœå››èˆäº”å…¥é“åˆ¶å®šå°æ•°ä½æ•°ï¼Œä¾‹å¦‚ï¼š
```js
1ã€const sum = 0.1 + 0.2 // 0.30000000000000000000004
2ã€const roundSum = sum.toFixed(1); // "0.3"
```
éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒtoFixed()æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„ç»“æœï¼Œå› æ­¤éœ€è¦æ³¨æ„ç±»å‹è½¬æ¢ã€‚

### 32. ä½¿ç”¨==å’Œ===çš„åŒºåˆ«
* ä½¿ç”¨åŒç­‰å·ï¼ˆ==ï¼‰è¿›è¡Œç›¸ç­‰åˆ¤æ–­æ—¶ï¼Œå¦‚æœä¸¤è¾¹çš„ç±»å‹ä¸ä¸€è‡´ï¼Œåˆ™ä¼šè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢åå†è¿›è¡Œæ¯”è¾ƒã€‚
* ä½¿ç”¨ä¸‰ç­‰å·ï¼ˆ===ï¼‰è¿›è¡Œç›¸ç­‰åˆ¤æ–­æ—¶ï¼Œå¦‚æœä¸¤è¾¹çš„ç±»å‹ä¸ä¸€è‡´ï¼Œä¸ä¼šåšå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç›´æ¥è¿”å›false

### 33. è§£é‡ŠrequestAnimationFrame/requsetIdleCallBackï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç”¨ï¼Ÿ
### 34. å¯¹äº‹ä»¶å¾ªç¯æœºåˆ¶çš„ç†è§£ï¼ˆjsäº‹ä»¶è½®è¯¢æœºåˆ¶ï¼‰
#### è®²æ¦‚å¿µ
jsäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼ˆEvent Loopï¼‰æ˜¯ä¸€ç§å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œç”¨äºå¤„ç†jsä¸­çš„äº‹ä»¶å’Œå›è°ƒå‡½æ•°ã€‚jsäº‹ä»¶å¾ªç¯æœºåˆ¶å¯ä»¥ä½¿å¾—å•çº¿ç¨‹çš„jsèƒ½å¤Ÿå¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œä»è€Œå®ç°å¼‚æ­¥ç¼–ç¨‹
#### æ·±å…¥çŸ¥è¯†ç‚¹
åœ¨æµè§ˆå™¨ä¸­ï¼ŒJavaScriptäº‹ä»¶è½®è¯¢æœºåˆ¶ç”±æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œã€‚
äº‹ä»¶å¾ªç¯æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä¼šä¸æ–­çš„è½®è¯¢ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ï¼Œå¹¶å°†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¾æ¬¡æ‰§è¡Œã€‚
##### åˆ†ç±»
 JavaScriptä¸­çš„ä»»åŠ¡å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šå®ä»»åŠ¡ï¼ˆMacro Taskï¼‰å’Œå¾®ä»»åŠ¡ï¼ˆMicro Taskï¼‰ã€‚
###### å®ä»»åŠ¡
å®ä»»åŠ¡é€šå¸¸åŒ…æ‹¬ä¸€äº›éœ€è¦èŠ±è´¹æ—¶é—´è¾ƒé•¿çš„æ“ä½œã€‚
Scriptï¼ˆå¯ä»¥ç†è§£æˆå¤–å±‚åŒæ­¥ä»£ç ï¼‰
setTimeoutã€setInterval
UI Renderingã€UIäº‹ä»¶
postMessageã€MessageChannel
setImmediateã€I/Oï¼ˆnode.jsï¼‰
###### å¾®ä»»åŠ¡
å¾®ä»»åŠ¡é€šå¸¸åŒ…æ‹¬ä¸€äº›éœ€è¦å°½å¿«æ‰§è¡Œçš„æ“ä½œã€‚
Promise.then
MutationObserverçš„å›è°ƒå‡½æ•°
process.nectTickï¼ˆNode.jsï¼‰
##### è¿‡ç¨‹
æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªå®ä»»åŠ¡æˆ–è€…å¾®ä»»åŠ¡ã€‚
å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œåˆ™å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªåŒæ­¥ä»£ç ã€‚
å¦‚æœé‡åˆ°å®ä»»åŠ¡ï¼Œåˆ™å°†å®ƒæ·»åŠ åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªåŒæ­¥ä»£ç ã€‚
å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼ŒJavaScriptå¼•æ“ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æœªæ‰§è¡Œçš„å¾®ä»»åŠ¡ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¼šç«‹å³æ‰§è¡Œè¿™äº›å¾®ä»»åŠ¡ã€‚å½“å‰çš„å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œåï¼ŒJavaScriptä¼šç»§ç»­æŸ¥çœ‹å®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œé‡å¤ä¸Šè¿°çš„æ“ä½œç›´åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºã€‚
å½“å‰äº‹ä»¶è½®è¯¢ç»“æŸï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡äº‹ä»¶çš„è§¦å‘ã€‚
##### æ³¨æ„
éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJavaScriptä¸­çš„äº‹ä»¶è½®è¯¢æœºåˆ¶æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œä¸èƒ½åŒæ—¶æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡ã€‚å¦‚æœå½“å‰å®ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œä¼šé˜»å¡å…¶ä»–å®ä»»åŠ¡çš„æ‰§è¡Œï¼Œä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜ã€‚
å› æ­¤åœ¨ç¼–å†™JavaScriptä»£ç æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½é¿å…é•¿æ—¶é—´çš„åŒæ­¥æ“ä½œï¼Œè€Œæ˜¯ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œä»¥ä¿è¯åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚
##### æ‹“å±•
nodeç¯å¢ƒäº‹ä»¶å¾ªç¯
###### Node 11ä»¥å‰ï¼š
æ‰§è¡Œå®Œä¸€ä¸ªé˜¶æ®µçš„æ‰€æœ‰ä»»åŠ¡
æ‰§è¡Œå®ŒnextTické˜Ÿåˆ—é‡Œé¢çš„å†…å®¹
ç„¶åæ‰§è¡Œå®Œå¾®ä»»åŠ¡é˜Ÿåˆ—çš„å†…å®¹
###### Node 11ä»¥åï¼š 
å’Œæµè§ˆå™¨çš„è¡Œä¸ºç»Ÿä¸€äº†ï¼Œéƒ½æ˜¯æ¯æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡å°±æ‰§è¡Œå®Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚

```js
function test () {
   console.log('start')
    setTimeout(() => {
        console.log('children2')
        Promise.resolve().then(() => {console.log('children2-1')})
    }, 0)
    setTimeout(() => {
        console.log('children3')
        Promise.resolve().then(() => {console.log('children3-1')})
    }, 0)
    Promise.resolve().then(() => {console.log('children1')})
    console.log('end')
}

test()

// ä»¥ä¸Šä»£ç åœ¨node11ä»¥ä¸‹ç‰ˆæœ¬çš„æ‰§è¡Œç»“æœ(å…ˆæ‰§è¡Œæ‰€æœ‰çš„å®ä»»åŠ¡ï¼Œå†æ‰§è¡Œå¾®ä»»åŠ¡)
// start
// end
// children1
// children2
// children3
// children2-1
// children3-1

// ä»¥ä¸Šä»£ç åœ¨node11åŠæµè§ˆå™¨çš„æ‰§è¡Œç»“æœ(é¡ºåºæ‰§è¡Œå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡)
// start
// end
// children1
// children2
// children2-1
// children3
// children3-1

```
###### asyncå’Œawait
asyncæ˜¯å¼‚æ­¥çš„æ„æ€ï¼Œawaitåˆ™å¯ä»¥ç†è§£ä¸ºç­‰å¾…ã€‚
é€šå¸¸ä¼šä¸€èµ·ä½¿ç”¨è¿™ä¸¤ä¸ªè¯­å¥ï¼Œç”¨asyncæ¥å£°æ˜å‡½æ•°æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œè€Œawaitåˆ™æ˜¯åœ¨asyncå£°æ˜åçš„å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œç”¨æ¥ç­‰å¾…å¼‚æ­¥æ–¹æ³•æ‰§è¡Œã€‚

```js
async function fn1 (){
    console.log(1)
    await fn2()
    console.log(2) // é˜»å¡
}

async function fn2 (){
    console.log('fn2')
}

fn1()
console.log(3)
// 1 -> fn2 -> 3 -> 2
```
awaitä¼šé˜»å¡åé¢çš„ä»£ç ï¼ˆå³åŠ å…¥äº†å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼Œç„¶åç»§ç»­æ‰§è¡Œasyncå¤–éƒ¨å½“å‰å®ä»»åŠ¡çš„åŒæ­¥ä»£ç ï¼Œæ‰§è¡Œå®Œæˆåæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—æ—¶ä¼šæ‰§è¡Œä¹‹å‰é˜»å¡çš„ä»£ç ã€‚
ç»ƒä¹ ç†è§£
```js
async function async1() {
    console.log('async1 start')
    await async2()
    console.log('async1 end')
}
async function async2() {
    console.log('async2')
}
console.log('script start')
setTimeout(function () {
    console.log('settimeout')
})
async1()
new Promise(function (resolve) {
    console.log('promise1')
    resolve()
}).then(function () {
    console.log('promise2')
})
console.log('script end')

/**
start > async1 start > async2 > promise1 > script end > async1 end 
> promise2 > settimeout
*/
```


